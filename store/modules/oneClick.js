export default {
	state: {
		calList:[
			{
				mark:'jsxmqqgzzxfGuo',
				check:true,
				name: "全国建设项目前期工作咨询费计算器",
				integral: 2,
				url: "/jsxmqqgzzxf/guo",
				parent_type: "建设项目前期工作咨询费",
				province: [
					{
						name: "全国"
					}
				],
				price: "6",
				role_id: 117,
				children:[
					{
						name:'jsxmqqgzzxfGuo0',
						data:{}
					},
				]
			},
			// {
			// 	mark:'jsdwglGuo',
			// 	check:true,
			// 	name: "项目建设管理费（原建设单位管理费）计算器",
			// 	integral: 2,
			// 	url: "/jsdwgl/guo",
			// 	parent_type: "建设单位管理费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "5",
			// 	role_id: 13,
			// 	children:[
			// 		{
			// 			name:'jsdwglGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'cdzbGuo',
			// 	check:true,
			// 	name: "场地准备费及临时设施费计算器",
			// 	integral: 1,
			// 	url: "/cdzb/guo",
			// 	parent_type: "场地准备及临时设施费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "1",
			// 	role_id: 34,
			// 	children:[
			// 		{
			// 			name:'cdzbGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'gckcfGuo',
			// 	check:true,
			// 	name: "工程勘察费计算器",
			// 	integral: 1,
			// 	url: "/gckcf/guo",
			// 	parent_type: "勘察费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "1",
			// 	role_id: 42,
			// 	children:[
			// 		{
			// 			name:'gckcfGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'sjfGuo',
			// 	check: true,
			// 	name: "设计费计算器",
			// 	integral: 2,
			// 	url: "/sjf/guo",
			// 	parent_type: "设计费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "8",
			// 	role_id: 24,
			// 	children:[
			// 		{
			// 			name:'sjfGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'jlfGuo',
			// 	check:true,
			// 	name: "全国通用监理费计算器",
			// 	integral: 2,
			// 	url: "/jlf/guo",
			// 	parent_type: "监理费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "8",
			// 	role_id: 25,
			// 	children:[
			// 		{
			// 			name:'jlfGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'sgtscfGuo',
			// 	check:true,
			// 	name: "全国施工图审查费计算器",
			// 	integral: 2,
			// 	url: "/sgtscf/guo",
			// 	parent_type: "施工图审查费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "6",
			// 	role_id: 75,
			// 	children:[
			// 		{
			// 			name:'sgtscfGuo0'
			// 		},
			// 	]
			// },
			{
				mark:'zjzxfYu',
				check:true,
				name: "河南省造价咨询费计算器",
				integral: 2,
				url: "/zjzxf/yu",
				parent_type: "造价咨询费",
				province: [
					{
						name: "河南",
					}
				],
				price: "6",
				role_id: 79,
				children:[
					{
						name:'zjzxfYu0',
						data:{}
					},
				]
			},
			// {
			// 	mark:'hjyxpjGuo',
			// 	check:true,
			// 	name: "环境影响评价费计算器",
			// 	integral: 2,
			// 	url: "/hjyxpj/guo",
			// 	parent_type: "环境影响评价费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "8",
			// 	role_id: 8,
			// 	children:[
			// 		{
			// 			name:'hjyxpjGuo0'
			// 		},
			// 	]
			// },
			{
				mark:'zbdlfGuo',
				check:true,
				name: "全国招标代理费计算器",
				integral: 2,
				url: "/zbdlf/guo",
				parent_type: "招标代理费",
				province: [
					{
						name: "全国"
					}
				],
				price: "6",
				role_id: 126,
				children:[
					{
						name:'zbdlfGuo0',
						data:{}
					},
				]
			},
			// {
			// 	mark:'ldaqwspsGuo',
			// 	check:true,
			// 	name: "劳动安全卫生评审费计算器",
			// 	integral: 1,
			// 	url: "/ldaqwsps/guo",
			// 	parent_type: "劳动安全卫生评审费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "1",
			// 	role_id: 33,
			// 	children:[
			// 		{
			// 			name:'ldaqwspsGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'stbcfGuo',
			// 	check:true,
			// 	name: "水土保持费计算器|保监[2005]22号计算器",
			// 	integral: 2,
			// 	url: "/stbcf/guo",
			// 	parent_type: "水土保持费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "9",
			// 	role_id: 21,
			// 	children:[
			// 		{
			// 			name:'stbcfGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'gcbxfGuo',
			// 	check:true,
			// 	name: "工程保险费计算器",
			// 	integral: 1,
			// 	url: "/gcbxf/guo",
			// 	parent_type: "工程保险费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "1",
			// 	role_id: 35,
			// 	children:[
			// 		{
			// 			name:'gcbxfGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'dzzhGuo',
			// 	check:true,
			// 	name: "地质灾害危险性评估收费计算器",
			// 	integral: 4,
			// 	url: "/dzzh/guo",
			// 	parent_type: "地质灾害危险性评估收费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "12",
			// 	role_id: 29,
			// 	children:[
			// 		{
			// 			name:'dzzhGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'ybfGuo',
			// 	check:true,
			// 	name: "预备费计算器",
			// 	integral: 2,
			// 	url: "/ybf/guo",
			// 	parent_type: "预备费",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "6",
			// 	role_id: 289,
			// 	children:[
			// 		{
			// 			name:'ybfGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'jsqlxGuo',
			// 	check:true,
			// 	name: "全国建设期利息计算器",
			// 	integral: 2,
			// 	url: "/jsqlx/guo",
			// 	parent_type: "建设期利息",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "8",
			// 	role_id: 300,
			// 	children:[
			// 		{
			// 			name:'jsqlxGuo0'
			// 		},
			// 	]
			// },
			// {
			// 	mark:'pdldzjGuo',
			// 	check:true,
			// 	name: "铺底流动资金计算器",
			// 	integral: 1,
			// 	url: "/pdldzj/guo",
			// 	parent_type: "铺底流动资金",
			// 	province: [
			// 		{
			// 			name: "全国"
			// 		}
			// 	],
			// 	price: "1",
			// 	role_id: 305,
			// 	children:[
			// 		{
			// 			name:'pdldzjGuo0'
			// 		},
			// 	]
			// },
		],
		selectCalList:{},
		needData:{},
		calData:[],
		calNameList:[]
	},
	getters:{
		getAllCalList:(state)=>{
			state.selectCalList = {}
			state.calList.forEach(item=>{
				if(item.check == true){
					state.selectCalList[item.mark] = item
				}
			})
			return state.selectCalList
		},
		allCalName:(state)=>{ //排序数组
			let arr = []
			state.calList.forEach(item=>{
				if(item.check == true){
					arr.push(item.mark)
				}
			})
			state.calNameList = arr
			console.log(state.calNameList)
			return arr
		},
		selectStatus:(state)=>{//全选状态
			return state.calList.every(item=>{
				return item.check == true
			})
		}
	},
	mutations: {
		selectedAll(state){  //全选
			state.calList.forEach(item=>{
				item.check = true
			})
		},
		unselectedAll(state){ //取消全选
			state.calList.forEach(item=>{
				item.check = false
			})
		},
		selectAllCal(state,cal){ //用户选择的单个计算器
			state.calList.forEach(item=>{
				if(item.name == cal.name){
					item.check = !item.check
				}
			})
		},
		chooseCal(state,cal){  //省份分类下单个计算器
			for(let i = 0;i<state.calList.length;i++){
				if(state.calList[i].name == cal.name){
					state.calList.splice(i,1)
					return
				}
			}
			cal.check = true
			state.calList.push(cal)
		},
		chooseAllCal(state,list){  //省份分类下全选
			const selectList = list.select
			const unselectList = list.unselect
			if(unselectList.length == 0){//取消全选
				for(let i = 0;i<state.calList.length;i++){
					for(let j = 0;j<selectList.length;j++){
						if(state.calList[i].name == selectList[j].name){
							state.calList.splice(i,1)
						}
					}
				}
			}else{
				unselectList.forEach(item=>{
					state.calList.push(item)
				})
			}
		},
		setNeedData(state,val){ //计算器数据
			state.calData = val
			// console.log(state.calData)
		},
		addCal(state,val){ // 复制单个计算器
			state.needData = val.data
			let data = {}
			for(let key in val.data){
				data[key] = val.data[key]
			}
			state.calList.forEach(item=>{
				if(val.name.search(item.mark) != -1){
					item.children.push({name:val.name,data})
				}
			})
			console.log(state.calList)
		},
		deleteCal(state,val){ //删除单个计算器
			state.calList.forEach(item=>{
				if(val.search(item.mark) != -1){
					item.children.pop()
				}
			})
		},
		moveDownCal(state,index){ // 下移计算器
			 state.calNameList[index] = state.calNameList.splice(index+1, 1, state.calNameList[index])[0];
		},
		moveUpCal(state,index){ //上移计算器
			state.calNameList[index] = state.calNameList.splice(index-1, 1, state.calNameList[index])[0];
		},
		imitate(state,data){
			state.calList = []
			// console.log(data)
			let list = []
			for(let key in data){
				console.log("+++",data[key])
				let son = {}
				son.check = true,
				son.name = key,
				son.mark = key
				son.children = []
				for(let i in data[key]){
					son.children.push({
						name: i,
						data: data[key][i]
					})
				}
				list.push(son)
			}
			state.calList = list
			console.log(state.calList)
			console.log(state.calNameList)
		}
	},
	actions: {
		doSelectAll({commit,getters}){ //全选全不选
			getters.selectStatus ? commit('unselectedAll') : commit('selectedAll')
		}
	}
}